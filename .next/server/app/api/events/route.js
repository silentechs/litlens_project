/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/events/route";
exports.ids = ["app/api/events/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fevents%2Froute&page=%2Fapi%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fevents%2Froute.ts&appDir=%2FUsers%2Fzak%2FDocuments%2Flitlens%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzak%2FDocuments%2Flitlens&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fevents%2Froute&page=%2Fapi%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fevents%2Froute.ts&appDir=%2FUsers%2Fzak%2FDocuments%2Flitlens%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzak%2FDocuments%2Flitlens&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_zak_Documents_litlens_src_app_api_events_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/events/route.ts */ \"(rsc)/./src/app/api/events/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/events/route\",\n        pathname: \"/api/events\",\n        filename: \"route\",\n        bundlePath: \"app/api/events/route\"\n    },\n    resolvedPagePath: \"/Users/zak/Documents/litlens/src/app/api/events/route.ts\",\n    nextConfigOutput,\n    userland: _Users_zak_Documents_litlens_src_app_api_events_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZldmVudHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmV2ZW50cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmV2ZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnphayUyRkRvY3VtZW50cyUyRmxpdGxlbnMlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGemFrJTJGRG9jdW1lbnRzJTJGbGl0bGVucyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDUTtBQUNyRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3phay9Eb2N1bWVudHMvbGl0bGVucy9zcmMvYXBwL2FwaS9ldmVudHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2V2ZW50cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2V2ZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZXZlbnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3phay9Eb2N1bWVudHMvbGl0bGVucy9zcmMvYXBwL2FwaS9ldmVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fevents%2Froute&page=%2Fapi%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fevents%2Froute.ts&appDir=%2FUsers%2Fzak%2FDocuments%2Flitlens%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzak%2FDocuments%2Flitlens&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/events/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/events/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n// SSE endpoint for real-time updates\nasync function GET(request) {\n    const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_0__.auth)();\n    if (!session?.user?.id) {\n        return new Response(\"Unauthorized\", {\n            status: 401\n        });\n    }\n    const url = new URL(request.url);\n    const projectId = url.searchParams.get(\"projectId\");\n    // Create a TransformStream for SSE\n    const stream = new TransformStream();\n    const writer = stream.writable.getWriter();\n    const encoder = new TextEncoder();\n    // Helper to send SSE events\n    const sendEvent = async (type, data)=>{\n        const event = `data: ${JSON.stringify({\n            type,\n            data,\n            timestamp: Date.now()\n        })}\\n\\n`;\n        await writer.write(encoder.encode(event));\n    };\n    // Send initial connection confirmation\n    sendEvent(\"connection\", {\n        status: \"connected\",\n        userId: session.user.id,\n        projectId\n    });\n    // Heartbeat to keep connection alive\n    const heartbeatInterval = setInterval(async ()=>{\n        try {\n            await sendEvent(\"heartbeat\", {\n                timestamp: Date.now()\n            });\n        } catch  {\n            clearInterval(heartbeatInterval);\n        }\n    }, 30000); // Every 30 seconds\n    // Handle client disconnect\n    request.signal.addEventListener(\"abort\", ()=>{\n        clearInterval(heartbeatInterval);\n        writer.close().catch(()=>{});\n    });\n    // In a real implementation, you would:\n    // 1. Subscribe to a Redis pub/sub channel for this user/project\n    // 2. Listen for events and forward them to the client\n    // 3. Unsubscribe when the connection closes\n    // To publish events from other parts of the app, import from:\n    // import { publishImportProgress, publishScreeningConflict } from \"@/lib/events/publisher\";\n    return new Response(stream.readable, {\n        headers: {\n            \"Content-Type\": \"text/event-stream\",\n            \"Cache-Control\": \"no-cache, no-transform\",\n            \"Connection\": \"keep-alive\",\n            \"X-Accel-Buffering\": \"no\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9ldmVudHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFFbEMscUNBQXFDO0FBQzlCLGVBQWVDLElBQUlDLE9BQWdCO0lBQ3hDLE1BQU1DLFVBQVUsTUFBTUgsK0NBQUlBO0lBRTFCLElBQUksQ0FBQ0csU0FBU0MsTUFBTUMsSUFBSTtRQUN0QixPQUFPLElBQUlDLFNBQVMsZ0JBQWdCO1lBQUVDLFFBQVE7UUFBSTtJQUNwRDtJQUVBLE1BQU1DLE1BQU0sSUFBSUMsSUFBSVAsUUFBUU0sR0FBRztJQUMvQixNQUFNRSxZQUFZRixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztJQUV2QyxtQ0FBbUM7SUFDbkMsTUFBTUMsU0FBUyxJQUFJQztJQUNuQixNQUFNQyxTQUFTRixPQUFPRyxRQUFRLENBQUNDLFNBQVM7SUFDeEMsTUFBTUMsVUFBVSxJQUFJQztJQUVwQiw0QkFBNEI7SUFDNUIsTUFBTUMsWUFBWSxPQUFPQyxNQUFjQztRQUNyQyxNQUFNQyxRQUFRLENBQUMsTUFBTSxFQUFFQyxLQUFLQyxTQUFTLENBQUM7WUFBRUo7WUFBTUM7WUFBTUksV0FBV0MsS0FBS0MsR0FBRztRQUFHLEdBQUcsSUFBSSxDQUFDO1FBQ2xGLE1BQU1iLE9BQU9jLEtBQUssQ0FBQ1gsUUFBUVksTUFBTSxDQUFDUDtJQUNwQztJQUVBLHVDQUF1QztJQUN2Q0gsVUFBVSxjQUFjO1FBQ3RCYixRQUFRO1FBQ1J3QixRQUFRNUIsUUFBUUMsSUFBSSxDQUFDQyxFQUFFO1FBQ3ZCSztJQUNGO0lBRUEscUNBQXFDO0lBQ3JDLE1BQU1zQixvQkFBb0JDLFlBQVk7UUFDcEMsSUFBSTtZQUNGLE1BQU1iLFVBQVUsYUFBYTtnQkFBRU0sV0FBV0MsS0FBS0MsR0FBRztZQUFHO1FBQ3ZELEVBQUUsT0FBTTtZQUNOTSxjQUFjRjtRQUNoQjtJQUNGLEdBQUcsUUFBUSxtQkFBbUI7SUFFOUIsMkJBQTJCO0lBQzNCOUIsUUFBUWlDLE1BQU0sQ0FBQ0MsZ0JBQWdCLENBQUMsU0FBUztRQUN2Q0YsY0FBY0Y7UUFDZGpCLE9BQU9zQixLQUFLLEdBQUdDLEtBQUssQ0FBQyxLQUFPO0lBQzlCO0lBRUEsdUNBQXVDO0lBQ3ZDLGdFQUFnRTtJQUNoRSxzREFBc0Q7SUFDdEQsNENBQTRDO0lBRTVDLDhEQUE4RDtJQUM5RCw0RkFBNEY7SUFFNUYsT0FBTyxJQUFJaEMsU0FBU08sT0FBTzBCLFFBQVEsRUFBRTtRQUNuQ0MsU0FBUztZQUNQLGdCQUFnQjtZQUNoQixpQkFBaUI7WUFDakIsY0FBYztZQUNkLHFCQUFxQjtRQUN2QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy96YWsvRG9jdW1lbnRzL2xpdGxlbnMvc3JjL2FwcC9hcGkvZXZlbnRzL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF1dGggfSBmcm9tIFwiQC9saWIvYXV0aFwiO1xuXG4vLyBTU0UgZW5kcG9pbnQgZm9yIHJlYWwtdGltZSB1cGRhdGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGgoKTtcbiAgXG4gIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFwiVW5hdXRob3JpemVkXCIsIHsgc3RhdHVzOiA0MDEgfSk7XG4gIH1cblxuICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgY29uc3QgcHJvamVjdElkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJwcm9qZWN0SWRcIik7XG5cbiAgLy8gQ3JlYXRlIGEgVHJhbnNmb3JtU3RyZWFtIGZvciBTU0VcbiAgY29uc3Qgc3RyZWFtID0gbmV3IFRyYW5zZm9ybVN0cmVhbSgpO1xuICBjb25zdCB3cml0ZXIgPSBzdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcblxuICAvLyBIZWxwZXIgdG8gc2VuZCBTU0UgZXZlbnRzXG4gIGNvbnN0IHNlbmRFdmVudCA9IGFzeW5jICh0eXBlOiBzdHJpbmcsIGRhdGE6IHVua25vd24pID0+IHtcbiAgICBjb25zdCBldmVudCA9IGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHsgdHlwZSwgZGF0YSwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pfVxcblxcbmA7XG4gICAgYXdhaXQgd3JpdGVyLndyaXRlKGVuY29kZXIuZW5jb2RlKGV2ZW50KSk7XG4gIH07XG5cbiAgLy8gU2VuZCBpbml0aWFsIGNvbm5lY3Rpb24gY29uZmlybWF0aW9uXG4gIHNlbmRFdmVudChcImNvbm5lY3Rpb25cIiwgeyBcbiAgICBzdGF0dXM6IFwiY29ubmVjdGVkXCIsIFxuICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuICAgIHByb2plY3RJZCBcbiAgfSk7XG5cbiAgLy8gSGVhcnRiZWF0IHRvIGtlZXAgY29ubmVjdGlvbiBhbGl2ZVxuICBjb25zdCBoZWFydGJlYXRJbnRlcnZhbCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2VuZEV2ZW50KFwiaGVhcnRiZWF0XCIsIHsgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pO1xuICAgIH0gY2F0Y2gge1xuICAgICAgY2xlYXJJbnRlcnZhbChoZWFydGJlYXRJbnRlcnZhbCk7XG4gICAgfVxuICB9LCAzMDAwMCk7IC8vIEV2ZXJ5IDMwIHNlY29uZHNcblxuICAvLyBIYW5kbGUgY2xpZW50IGRpc2Nvbm5lY3RcbiAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICBjbGVhckludGVydmFsKGhlYXJ0YmVhdEludGVydmFsKTtcbiAgICB3cml0ZXIuY2xvc2UoKS5jYXRjaCgoKSA9PiB7fSk7XG4gIH0pO1xuXG4gIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91IHdvdWxkOlxuICAvLyAxLiBTdWJzY3JpYmUgdG8gYSBSZWRpcyBwdWIvc3ViIGNoYW5uZWwgZm9yIHRoaXMgdXNlci9wcm9qZWN0XG4gIC8vIDIuIExpc3RlbiBmb3IgZXZlbnRzIGFuZCBmb3J3YXJkIHRoZW0gdG8gdGhlIGNsaWVudFxuICAvLyAzLiBVbnN1YnNjcmliZSB3aGVuIHRoZSBjb25uZWN0aW9uIGNsb3Nlc1xuICBcbiAgLy8gVG8gcHVibGlzaCBldmVudHMgZnJvbSBvdGhlciBwYXJ0cyBvZiB0aGUgYXBwLCBpbXBvcnQgZnJvbTpcbiAgLy8gaW1wb3J0IHsgcHVibGlzaEltcG9ydFByb2dyZXNzLCBwdWJsaXNoU2NyZWVuaW5nQ29uZmxpY3QgfSBmcm9tIFwiQC9saWIvZXZlbnRzL3B1Ymxpc2hlclwiO1xuXG4gIHJldHVybiBuZXcgUmVzcG9uc2Uoc3RyZWFtLnJlYWRhYmxlLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L2V2ZW50LXN0cmVhbVwiLFxuICAgICAgXCJDYWNoZS1Db250cm9sXCI6IFwibm8tY2FjaGUsIG5vLXRyYW5zZm9ybVwiLFxuICAgICAgXCJDb25uZWN0aW9uXCI6IFwia2VlcC1hbGl2ZVwiLFxuICAgICAgXCJYLUFjY2VsLUJ1ZmZlcmluZ1wiOiBcIm5vXCIsIC8vIERpc2FibGUgYnVmZmVyaW5nIGluIG5naW54XG4gICAgfSxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiYXV0aCIsIkdFVCIsInJlcXVlc3QiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiUmVzcG9uc2UiLCJzdGF0dXMiLCJ1cmwiLCJVUkwiLCJwcm9qZWN0SWQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJzdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJ3cml0YWJsZSIsImdldFdyaXRlciIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsInNlbmRFdmVudCIsInR5cGUiLCJkYXRhIiwiZXZlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIndyaXRlIiwiZW5jb2RlIiwidXNlcklkIiwiaGVhcnRiZWF0SW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzaWduYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJjYXRjaCIsInJlYWRhYmxlIiwiaGVhZGVycyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/events/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   handlers: () => (/* binding */ handlers),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   requireAdmin: () => (/* binding */ requireAdmin),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   signIn: () => (/* binding */ signIn),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var _auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @auth/prisma-adapter */ \"(rsc)/./node_modules/@auth/prisma-adapter/index.js\");\n/* harmony import */ var next_auth_providers_resend__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/resend */ \"(rsc)/./node_modules/next-auth/providers/resend.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n\n\n\n\n\n// Credentials validation schema\nconst credentialsSchema = zod__WEBPACK_IMPORTED_MODULE_6__.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_6__.string().email(\"Invalid email address\"),\n    password: zod__WEBPACK_IMPORTED_MODULE_6__.string().min(8, \"Password must be at least 8 characters\")\n});\nconst { handlers, auth, signIn, signOut } = (0,next_auth__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    adapter: (0,_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__.PrismaAdapter)(_db__WEBPACK_IMPORTED_MODULE_4__.db),\n    providers: [\n        // Magic Link via Resend\n        (0,next_auth_providers_resend__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            apiKey: process.env.RESEND_API_KEY,\n            from: process.env.FROM_EMAIL || \"LitLens <noreply@litlens.com>\"\n        }),\n        // Email/Password credentials\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            id: \"credentials\",\n            name: \"Email & Password\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    const parsed = credentialsSchema.safeParse(credentials);\n                    if (!parsed.success) {\n                        console.log(\"[Auth] Invalid credentials format:\", parsed.error.errors);\n                        return null;\n                    }\n                    const { email, password } = parsed.data;\n                    // Find user with password\n                    const user = await _db__WEBPACK_IMPORTED_MODULE_4__.db.user.findUnique({\n                        where: {\n                            email: email.toLowerCase()\n                        },\n                        select: {\n                            id: true,\n                            email: true,\n                            name: true,\n                            image: true,\n                            password: true,\n                            role: true,\n                            emailVerified: true\n                        }\n                    });\n                    // User not found or no password set\n                    if (!user) {\n                        console.log(\"[Auth] User not found:\", email);\n                        return null;\n                    }\n                    if (!user.password) {\n                        console.log(\"[Auth] User has no password set (magic link user):\", email);\n                        return null;\n                    }\n                    // Verify password\n                    const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"].compare(password, user.password);\n                    if (!isValid) {\n                        console.log(\"[Auth] Invalid password for:\", email);\n                        return null;\n                    }\n                    console.log(\"[Auth] Login successful for:\", email);\n                    // Return user data (without password)\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        image: user.image,\n                        role: user.role,\n                        emailVerified: user.emailVerified\n                    };\n                } catch (error) {\n                    console.error(\"[Auth] Authorization error:\", error);\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    pages: {\n        signIn: \"/login\",\n        signOut: \"/login\",\n        error: \"/login\",\n        verifyRequest: \"/verify-request\",\n        newUser: \"/onboarding\"\n    },\n    callbacks: {\n        async jwt ({ token, user, trigger, session }) {\n            // Initial sign in\n            if (user) {\n                token.id = user.id;\n                token.role = user.role || \"USER\";\n            }\n            // Fetch fresh user data on session update\n            if (trigger === \"update\" && session) {\n                const freshUser = await _db__WEBPACK_IMPORTED_MODULE_4__.db.user.findUnique({\n                    where: {\n                        id: token.id\n                    },\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true,\n                        role: true\n                    }\n                });\n                if (freshUser) {\n                    token.name = freshUser.name;\n                    token.email = freshUser.email;\n                    token.picture = freshUser.image;\n                    token.role = freshUser.role;\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.id;\n                session.user.role = token.role;\n            }\n            return session;\n        },\n        async signIn ({ user, account }) {\n            // For credentials provider, always allow (password already verified)\n            if (account?.provider === \"credentials\") {\n                return true;\n            }\n            // For magic link, check email exists\n            if (!user?.email) {\n                return false;\n            }\n            return true;\n        }\n    },\n    events: {\n        async signIn ({ user, account, isNewUser }) {\n            // Log sign in activity\n            if (user.id) {\n                await _db__WEBPACK_IMPORTED_MODULE_4__.db.activity.create({\n                    data: {\n                        userId: user.id,\n                        type: \"PROJECT_CREATED\",\n                        description: `User signed in via ${account?.provider || \"credentials\"}`,\n                        metadata: {\n                            provider: account?.provider || \"credentials\",\n                            isNewUser\n                        }\n                    }\n                }).catch(console.error);\n            }\n        },\n        async createUser ({ user }) {\n            // Create default preferences for new users\n            if (user.id) {\n                await _db__WEBPACK_IMPORTED_MODULE_4__.db.userPreferences.create({\n                    data: {\n                        userId: user.id\n                    }\n                }).catch(console.error);\n            }\n        }\n    },\n    secret: process.env.AUTH_SECRET,\n    debug: \"development\" === \"development\"\n});\n// ============== PASSWORD UTILITIES ==============\n/**\n * Hash a password using bcrypt\n */ async function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"].hash(password, 12);\n}\n/**\n * Verify a password against a hash\n */ async function verifyPassword(password, hash) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"].compare(password, hash);\n}\n// ============== AUTH HELPERS ==============\n/**\n * Get current session (for server components)\n */ async function getCurrentUser() {\n    const session = await auth();\n    return session?.user;\n}\n/**\n * Require authentication (throws if not authenticated)\n */ async function requireAuth() {\n    const user = await getCurrentUser();\n    if (!user) {\n        throw new Error(\"Unauthorized\");\n    }\n    return user;\n}\n/**\n * Check if user has a specific role\n */ async function requireRole(roles) {\n    const user = await requireAuth();\n    if (!roles.includes(user.role || \"\")) {\n        throw new Error(\"Forbidden\");\n    }\n    return user;\n}\n/**\n * Check if user is admin\n */ async function requireAdmin() {\n    return requireRole([\n        \"ADMIN\"\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVBOztDQUVDLEdBQ00sZUFBZW1FLGVBQWVuRSxRQUFnQixFQUFFa0UsSUFBWTtJQUNqRSxPQUFPdkUsd0RBQWMsQ0FBQ0ssVUFBVWtFO0FBQ2xDO0FBRUEsNkNBQTZDO0FBRTdDOztDQUVDLEdBQ00sZUFBZUU7SUFDcEIsTUFBTTlCLFVBQVUsTUFBTW5DO0lBQ3RCLE9BQU9tQyxTQUFTVjtBQUNsQjtBQUVBOztDQUVDLEdBQ00sZUFBZXlDO0lBQ3BCLE1BQU16QyxPQUFPLE1BQU13QztJQUNuQixJQUFJLENBQUN4QyxNQUFNO1FBQ1QsTUFBTSxJQUFJMEMsTUFBTTtJQUNsQjtJQUNBLE9BQU8xQztBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlMkMsWUFBWUMsS0FBZTtJQUMvQyxNQUFNNUMsT0FBTyxNQUFNeUM7SUFDbkIsSUFBSSxDQUFDRyxNQUFNQyxRQUFRLENBQUM3QyxLQUFLTSxJQUFJLElBQUksS0FBSztRQUNwQyxNQUFNLElBQUlvQyxNQUFNO0lBQ2xCO0lBQ0EsT0FBTzFDO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNNLGVBQWU4QztJQUNwQixPQUFPSCxZQUFZO1FBQUM7S0FBUTtBQUM5QiIsInNvdXJjZXMiOlsiL1VzZXJzL3phay9Eb2N1bWVudHMvbGl0bGVucy9zcmMvbGliL2F1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tIFwiQGF1dGgvcHJpc21hLWFkYXB0ZXJcIjtcbmltcG9ydCBSZXNlbmQgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvcmVzZW5kXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHMgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIi4vZGJcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuXG4vLyBDcmVkZW50aWFscyB2YWxpZGF0aW9uIHNjaGVtYVxuY29uc3QgY3JlZGVudGlhbHNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKFwiSW52YWxpZCBlbWFpbCBhZGRyZXNzXCIpLFxuICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oOCwgXCJQYXNzd29yZCBtdXN0IGJlIGF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgeyBoYW5kbGVycywgYXV0aCwgc2lnbkluLCBzaWduT3V0IH0gPSBOZXh0QXV0aCh7XG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIoZGIpLFxuICBcbiAgcHJvdmlkZXJzOiBbXG4gICAgLy8gTWFnaWMgTGluayB2aWEgUmVzZW5kXG4gICAgUmVzZW5kKHtcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuUkVTRU5EX0FQSV9LRVksXG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5GUk9NX0VNQUlMIHx8IFwiTGl0TGVucyA8bm9yZXBseUBsaXRsZW5zLmNvbT5cIixcbiAgICB9KSxcbiAgICBcbiAgICAvLyBFbWFpbC9QYXNzd29yZCBjcmVkZW50aWFsc1xuICAgIENyZWRlbnRpYWxzKHtcbiAgICAgIGlkOiBcImNyZWRlbnRpYWxzXCIsXG4gICAgICBuYW1lOiBcIkVtYWlsICYgUGFzc3dvcmRcIixcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBjcmVkZW50aWFsc1NjaGVtYS5zYWZlUGFyc2UoY3JlZGVudGlhbHMpO1xuICAgICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0F1dGhdIEludmFsaWQgY3JlZGVudGlhbHMgZm9ybWF0OlwiLCBwYXJzZWQuZXJyb3IuZXJyb3JzKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSBwYXJzZWQuZGF0YTtcblxuICAgICAgICAgIC8vIEZpbmQgdXNlciB3aXRoIHBhc3N3b3JkXG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSB9LFxuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgaW1hZ2U6IHRydWUsXG4gICAgICAgICAgICAgIHBhc3N3b3JkOiB0cnVlLFxuICAgICAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFVzZXIgbm90IGZvdW5kIG9yIG5vIHBhc3N3b3JkIHNldFxuICAgICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJbQXV0aF0gVXNlciBub3QgZm91bmQ6XCIsIGVtYWlsKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIXVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0F1dGhdIFVzZXIgaGFzIG5vIHBhc3N3b3JkIHNldCAobWFnaWMgbGluayB1c2VyKTpcIiwgZW1haWwpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gVmVyaWZ5IHBhc3N3b3JkXG4gICAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0F1dGhdIEludmFsaWQgcGFzc3dvcmQgZm9yOlwiLCBlbWFpbCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIltBdXRoXSBMb2dpbiBzdWNjZXNzZnVsIGZvcjpcIiwgZW1haWwpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJldHVybiB1c2VyIGRhdGEgKHdpdGhvdXQgcGFzc3dvcmQpXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSxcbiAgICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHVzZXIuZW1haWxWZXJpZmllZCxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbQXV0aF0gQXV0aG9yaXphdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pLFxuICBdLFxuICBcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiLFxuICAgIG1heEFnZTogMzAgKiAyNCAqIDYwICogNjAsIC8vIDMwIGRheXNcbiAgfSxcbiAgXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiBcIi9sb2dpblwiLFxuICAgIHNpZ25PdXQ6IFwiL2xvZ2luXCIsXG4gICAgZXJyb3I6IFwiL2xvZ2luXCIsXG4gICAgdmVyaWZ5UmVxdWVzdDogXCIvdmVyaWZ5LXJlcXVlc3RcIixcbiAgICBuZXdVc2VyOiBcIi9vbmJvYXJkaW5nXCIsXG4gIH0sXG4gIFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciwgdHJpZ2dlciwgc2Vzc2lvbiB9KSB7XG4gICAgICAvLyBJbml0aWFsIHNpZ24gaW5cbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLmlkID0gdXNlci5pZDtcbiAgICAgICAgdG9rZW4ucm9sZSA9ICh1c2VyIGFzIHsgcm9sZT86IHN0cmluZyB9KS5yb2xlIHx8IFwiVVNFUlwiO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGZXRjaCBmcmVzaCB1c2VyIGRhdGEgb24gc2Vzc2lvbiB1cGRhdGVcbiAgICAgIGlmICh0cmlnZ2VyID09PSBcInVwZGF0ZVwiICYmIHNlc3Npb24pIHtcbiAgICAgICAgY29uc3QgZnJlc2hVc2VyID0gYXdhaXQgZGIudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogdG9rZW4uaWQgYXMgc3RyaW5nIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgIGltYWdlOiB0cnVlLFxuICAgICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmcmVzaFVzZXIpIHtcbiAgICAgICAgICB0b2tlbi5uYW1lID0gZnJlc2hVc2VyLm5hbWU7XG4gICAgICAgICAgdG9rZW4uZW1haWwgPSBmcmVzaFVzZXIuZW1haWw7XG4gICAgICAgICAgdG9rZW4ucGljdHVyZSA9IGZyZXNoVXNlci5pbWFnZTtcbiAgICAgICAgICB0b2tlbi5yb2xlID0gZnJlc2hVc2VyLnJvbGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbiAmJiBzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQgYXMgc3RyaW5nO1xuICAgICAgICBzZXNzaW9uLnVzZXIucm9sZSA9IHRva2VuLnJvbGUgYXMgc3RyaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgICBcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50IH0pIHtcbiAgICAgIC8vIEZvciBjcmVkZW50aWFscyBwcm92aWRlciwgYWx3YXlzIGFsbG93IChwYXNzd29yZCBhbHJlYWR5IHZlcmlmaWVkKVxuICAgICAgaWYgKGFjY291bnQ/LnByb3ZpZGVyID09PSBcImNyZWRlbnRpYWxzXCIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZvciBtYWdpYyBsaW5rLCBjaGVjayBlbWFpbCBleGlzdHNcbiAgICAgIGlmICghdXNlcj8uZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICB9LFxuICBcbiAgZXZlbnRzOiB7XG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgaXNOZXdVc2VyIH0pIHtcbiAgICAgIC8vIExvZyBzaWduIGluIGFjdGl2aXR5XG4gICAgICBpZiAodXNlci5pZCkge1xuICAgICAgICBhd2FpdCBkYi5hY3Rpdml0eS5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICAgIHR5cGU6IFwiUFJPSkVDVF9DUkVBVEVEXCIsIC8vIFVzaW5nIGV4aXN0aW5nIGVudW1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgVXNlciBzaWduZWQgaW4gdmlhICR7YWNjb3VudD8ucHJvdmlkZXIgfHwgXCJjcmVkZW50aWFsc1wifWAsXG4gICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICBwcm92aWRlcjogYWNjb3VudD8ucHJvdmlkZXIgfHwgXCJjcmVkZW50aWFsc1wiLFxuICAgICAgICAgICAgICBpc05ld1VzZXIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgYXN5bmMgY3JlYXRlVXNlcih7IHVzZXIgfSkge1xuICAgICAgLy8gQ3JlYXRlIGRlZmF1bHQgcHJlZmVyZW5jZXMgZm9yIG5ldyB1c2Vyc1xuICAgICAgaWYgKHVzZXIuaWQpIHtcbiAgICAgICAgYXdhaXQgZGIudXNlclByZWZlcmVuY2VzLmNyZWF0ZSh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG4gIFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52LkFVVEhfU0VDUkVULFxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIixcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PSBQQVNTV09SRCBVVElMSVRJRVMgPT09PT09PT09PT09PT1cblxuLyoqXG4gKiBIYXNoIGEgcGFzc3dvcmQgdXNpbmcgYmNyeXB0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTIpO1xufVxuXG4vKipcbiAqIFZlcmlmeSBhIHBhc3N3b3JkIGFnYWluc3QgYSBoYXNoXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoKTtcbn1cblxuLy8gPT09PT09PT09PT09PT0gQVVUSCBIRUxQRVJTID09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgc2Vzc2lvbiAoZm9yIHNlcnZlciBjb21wb25lbnRzKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBhdXRoKCk7XG4gIHJldHVybiBzZXNzaW9uPy51c2VyO1xufVxuXG4vKipcbiAqIFJlcXVpcmUgYXV0aGVudGljYXRpb24gKHRocm93cyBpZiBub3QgYXV0aGVudGljYXRlZClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoKCkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hdXRob3JpemVkXCIpO1xuICB9XG4gIHJldHVybiB1c2VyO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHVzZXIgaGFzIGEgc3BlY2lmaWMgcm9sZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWlyZVJvbGUocm9sZXM6IHN0cmluZ1tdKSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCByZXF1aXJlQXV0aCgpO1xuICBpZiAoIXJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSB8fCBcIlwiKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZvcmJpZGRlblwiKTtcbiAgfVxuICByZXR1cm4gdXNlcjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGlzIGFkbWluXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQWRtaW4oKSB7XG4gIHJldHVybiByZXF1aXJlUm9sZShbXCJBRE1JTlwiXSk7XG59XG5cbi8vID09PT09PT09PT09PT09IFRZUEUgQVVHTUVOVEFUSU9OID09PT09PT09PT09PT09XG5cbmRlY2xhcmUgbW9kdWxlIFwibmV4dC1hdXRoXCIge1xuICBpbnRlcmZhY2UgU2Vzc2lvbiB7XG4gICAgdXNlcjoge1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIG5hbWU/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgZW1haWw/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgaW1hZ2U/OiBzdHJpbmcgfCBudWxsO1xuICAgICAgcm9sZT86IHN0cmluZztcbiAgICB9O1xuICB9XG4gIFxuICBpbnRlcmZhY2UgVXNlciB7XG4gICAgcm9sZT86IHN0cmluZztcbiAgICBlbWFpbFZlcmlmaWVkPzogRGF0ZSB8IG51bGw7XG4gIH1cbn1cblxuZGVjbGFyZSBtb2R1bGUgXCJAYXV0aC9jb3JlL2p3dFwiIHtcbiAgaW50ZXJmYWNlIEpXVCB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgcm9sZT86IHN0cmluZztcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiUHJpc21hQWRhcHRlciIsIlJlc2VuZCIsIkNyZWRlbnRpYWxzIiwiZGIiLCJ6IiwiYmNyeXB0IiwiY3JlZGVudGlhbHNTY2hlbWEiLCJvYmplY3QiLCJlbWFpbCIsInN0cmluZyIsInBhc3N3b3JkIiwibWluIiwiaGFuZGxlcnMiLCJhdXRoIiwic2lnbkluIiwic2lnbk91dCIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiUkVTRU5EX0FQSV9LRVkiLCJmcm9tIiwiRlJPTV9FTUFJTCIsImlkIiwibmFtZSIsImNyZWRlbnRpYWxzIiwibGFiZWwiLCJ0eXBlIiwiYXV0aG9yaXplIiwicGFyc2VkIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImVycm9ycyIsImRhdGEiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwidG9Mb3dlckNhc2UiLCJzZWxlY3QiLCJpbWFnZSIsInJvbGUiLCJlbWFpbFZlcmlmaWVkIiwiaXNWYWxpZCIsImNvbXBhcmUiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJwYWdlcyIsInZlcmlmeVJlcXVlc3QiLCJuZXdVc2VyIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJ0cmlnZ2VyIiwiZnJlc2hVc2VyIiwicGljdHVyZSIsImFjY291bnQiLCJwcm92aWRlciIsImV2ZW50cyIsImlzTmV3VXNlciIsImFjdGl2aXR5IiwiY3JlYXRlIiwidXNlcklkIiwiZGVzY3JpcHRpb24iLCJtZXRhZGF0YSIsImNhdGNoIiwiY3JlYXRlVXNlciIsInVzZXJQcmVmZXJlbmNlcyIsInNlY3JldCIsIkFVVEhfU0VDUkVUIiwiZGVidWciLCJoYXNoUGFzc3dvcmQiLCJoYXNoIiwidmVyaWZ5UGFzc3dvcmQiLCJnZXRDdXJyZW50VXNlciIsInJlcXVpcmVBdXRoIiwiRXJyb3IiLCJyZXF1aXJlUm9sZSIsInJvbGVzIiwiaW5jbHVkZXMiLCJyZXF1aXJlQWRtaW4iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_adapter_neon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/adapter-neon */ \"(rsc)/./node_modules/@prisma/adapter-neon/dist/index.mjs\");\n\n\n// Only configure WebSocket for runtime (not during build)\nlet adapter;\nif ( true && process.env.DATABASE_URL) {\n    // Server-side: use Neon adapter\n    const { neonConfig } = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.js\");\n    // Only set up WebSocket in Node.js runtime (not Edge or build time)\n    if (true) {\n        try {\n            const ws = __webpack_require__(/*! ws */ \"(rsc)/./node_modules/ws/index.js\");\n            neonConfig.webSocketConstructor = ws;\n        } catch  {\n        // ws not available (Edge runtime), Neon will use fetch\n        }\n    }\n    adapter = new _prisma_adapter_neon__WEBPACK_IMPORTED_MODULE_1__.PrismaNeon({\n        connectionString: process.env.DATABASE_URL\n    });\n}\nconst globalForPrisma = globalThis;\nfunction createPrismaClient() {\n    // During build time or without DATABASE_URL, create a minimal client\n    if (!process.env.DATABASE_URL) {\n        console.warn(\"DATABASE_URL not set, using mock Prisma client\");\n        return new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    return new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n        adapter,\n        log:  true ? [\n            \"query\",\n            \"error\",\n            \"warn\"\n        ] : 0\n    });\n}\nconst db = globalForPrisma.prisma ?? createPrismaClient();\nif (true) {\n    globalForPrisma.prisma = db;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (db);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThDO0FBQ0k7QUFFbEQsMERBQTBEO0FBQzFELElBQUlFO0FBRUosSUFBSSxLQUE2QixJQUFJQyxRQUFRQyxHQUFHLENBQUNDLFlBQVksRUFBRTtJQUM3RCxnQ0FBZ0M7SUFDaEMsTUFBTSxFQUFFQyxVQUFVLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsd0ZBQTBCO0lBRXpELG9FQUFvRTtJQUNwRSxJQUFJSixJQUEyRCxFQUFFO1FBQy9ELElBQUk7WUFDRixNQUFNTSxLQUFLRixtQkFBT0EsQ0FBQyw0Q0FBSTtZQUN2QkQsV0FBV0ksb0JBQW9CLEdBQUdEO1FBQ3BDLEVBQUUsT0FBTTtRQUNOLHVEQUF1RDtRQUN6RDtJQUNGO0lBRUFQLFVBQVUsSUFBSUQsNERBQVVBLENBQUM7UUFBRVUsa0JBQWtCUixRQUFRQyxHQUFHLENBQUNDLFlBQVk7SUFBQztBQUN4RTtBQUVBLE1BQU1PLGtCQUFrQkM7QUFJeEIsU0FBU0M7SUFDUCxxRUFBcUU7SUFDckUsSUFBSSxDQUFDWCxRQUFRQyxHQUFHLENBQUNDLFlBQVksRUFBRTtRQUM3QlUsUUFBUUMsSUFBSSxDQUFDO1FBQ2IsT0FBTyxJQUFJaEIsd0RBQVlBO0lBQ3pCO0lBRUEsT0FBTyxJQUFJQSx3REFBWUEsQ0FBQztRQUN0QkU7UUFDQWUsS0FDRWQsS0FBc0MsR0FDbEM7WUFBQztZQUFTO1lBQVM7U0FBTyxHQUMxQixDQUFTO0lBQ2pCO0FBQ0Y7QUFFTyxNQUFNZSxLQUFLTixnQkFBZ0JPLE1BQU0sSUFBSUwscUJBQXFCO0FBRWpFLElBQUlYLElBQXFDLEVBQUU7SUFDekNTLGdCQUFnQk8sTUFBTSxHQUFHRDtBQUMzQjtBQUVBLGlFQUFlQSxFQUFFQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvemFrL0RvY3VtZW50cy9saXRsZW5zL3NyYy9saWIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyBQcmlzbWFOZW9uIH0gZnJvbSBcIkBwcmlzbWEvYWRhcHRlci1uZW9uXCI7XG5cbi8vIE9ubHkgY29uZmlndXJlIFdlYlNvY2tldCBmb3IgcnVudGltZSAobm90IGR1cmluZyBidWlsZClcbmxldCBhZGFwdGVyOiBJbnN0YW5jZVR5cGU8dHlwZW9mIFByaXNtYU5lb24+IHwgdW5kZWZpbmVkO1xuXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpIHtcbiAgLy8gU2VydmVyLXNpZGU6IHVzZSBOZW9uIGFkYXB0ZXJcbiAgY29uc3QgeyBuZW9uQ29uZmlnIH0gPSByZXF1aXJlKFwiQG5lb25kYXRhYmFzZS9zZXJ2ZXJsZXNzXCIpO1xuICBcbiAgLy8gT25seSBzZXQgdXAgV2ViU29ja2V0IGluIE5vZGUuanMgcnVudGltZSAobm90IEVkZ2Ugb3IgYnVpbGQgdGltZSlcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiB8fCBwcm9jZXNzLmVudi5WRVJDRUwpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgd3MgPSByZXF1aXJlKFwid3NcIik7XG4gICAgICBuZW9uQ29uZmlnLndlYlNvY2tldENvbnN0cnVjdG9yID0gd3M7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyB3cyBub3QgYXZhaWxhYmxlIChFZGdlIHJ1bnRpbWUpLCBOZW9uIHdpbGwgdXNlIGZldGNoXG4gICAgfVxuICB9XG4gIFxuICBhZGFwdGVyID0gbmV3IFByaXNtYU5lb24oeyBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfSk7XG59XG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlUHJpc21hQ2xpZW50KCkge1xuICAvLyBEdXJpbmcgYnVpbGQgdGltZSBvciB3aXRob3V0IERBVEFCQVNFX1VSTCwgY3JlYXRlIGEgbWluaW1hbCBjbGllbnRcbiAgaWYgKCFwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpIHtcbiAgICBjb25zb2xlLndhcm4oXCJEQVRBQkFTRV9VUkwgbm90IHNldCwgdXNpbmcgbW9jayBQcmlzbWEgY2xpZW50XCIpO1xuICAgIHJldHVybiBuZXcgUHJpc21hQ2xpZW50KCk7XG4gIH1cblxuICByZXR1cm4gbmV3IFByaXNtYUNsaWVudCh7XG4gICAgYWRhcHRlcixcbiAgICBsb2c6XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiXG4gICAgICAgID8gW1wicXVlcnlcIiwgXCJlcnJvclwiLCBcIndhcm5cIl1cbiAgICAgICAgOiBbXCJlcnJvclwiXSxcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBkYiA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gY3JlYXRlUHJpc21hQ2xpZW50KCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IGRiO1xufVxuXG5leHBvcnQgZGVmYXVsdCBkYjtcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJQcmlzbWFOZW9uIiwiYWRhcHRlciIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJuZW9uQ29uZmlnIiwicmVxdWlyZSIsIlZFUkNFTCIsIndzIiwid2ViU29ja2V0Q29uc3RydWN0b3IiLCJjb25uZWN0aW9uU3RyaW5nIiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsImNyZWF0ZVByaXNtYUNsaWVudCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiZGIiLCJwcmlzbWEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/jose","vendor-chunks/ws","vendor-chunks/zod","vendor-chunks/@prisma","vendor-chunks/@panva","vendor-chunks/preact","vendor-chunks/@neondatabase","vendor-chunks/preact-render-to-string","vendor-chunks/oauth4webapi","vendor-chunks/bcryptjs","vendor-chunks/@auth","vendor-chunks/postgres-array"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fevents%2Froute&page=%2Fapi%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fevents%2Froute.ts&appDir=%2FUsers%2Fzak%2FDocuments%2Flitlens%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fzak%2FDocuments%2Flitlens&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();